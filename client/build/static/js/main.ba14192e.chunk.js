(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{325:function(e,t,r){},331:function(e,t,r){},332:function(e,t,r){},333:function(e,t,r){},351:function(e,t,r){},358:function(e,t,r){},485:function(e,t,r){},486:function(e,t,r){},494:function(e,t){},496:function(e,t){},510:function(e,t){},512:function(e,t){},540:function(e,t){},542:function(e,t){},543:function(e,t){},548:function(e,t){},550:function(e,t){},569:function(e,t){},581:function(e,t){},584:function(e,t){},601:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(36),a=r.n(c),s=(r(325),r(37)),o=r(615),i=r(616),l=r(617),j=r(618),u=r(612),d=r(611),b=r.p+"static/media/blogging.ffbd0b74.png",O=r(31),h="LOGIN",m="UPDATE_USER",p="LOGIN_SUCCESS",x="LOGIN_FAILED",f="LOGOUT",v=function(e){return{type:h,payload:e}},g=function(e){return{type:p,payload:e}},w=function(e){return{type:m,payload:e}},y=function(e){return{type:x,payload:e}},N=function(){return{type:f}},P=r(1),k=u.a.SubMenu;function S(){var e=Object(O.c)((function(e){return e.user})),t=Object(O.b)();return Object(P.jsx)("div",{children:Object(P.jsxs)(u.a,{selectedKeys:"logo",mode:"horizontal",theme:"dark",children:[Object(P.jsx)(u.a.Item,{className:"unhoverable-menu-item",children:Object(P.jsxs)("a",{href:"/",children:[Object(P.jsx)(d.a,{src:b,shape:"square"})," \xa0 Blog App"]})}),e.isLoggedIn?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)(k,{icon:Object(P.jsx)(d.a,{src:e.user.imageUrl,shape:"circle"}),title:" "+e.user.userName,className:"float-right unhoverable-menu-item",children:[Object(P.jsx)(u.a.Item,{icon:Object(P.jsx)(o.a,{}),children:Object(P.jsx)("a",{href:"/user/settings",children:"User Settings"})},"userProfile"),Object(P.jsx)(u.a.Item,{icon:Object(P.jsx)(i.a,{}),onClick:function(){return t(N())},children:"Logout"},"logout")]},"SubMenu"),Object(P.jsx)(u.a.Item,{icon:Object(P.jsx)(l.a,{}),className:"float-right",children:Object(P.jsx)("a",{href:"/post/form",children:"New Post"})},"newPost")]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(u.a.Item,{icon:Object(P.jsx)(i.a,{}),className:"float-right",children:Object(P.jsx)("a",{href:"/login",children:"Login"})},"login"),Object(P.jsx)(u.a.Item,{icon:Object(P.jsx)(j.a,{}),className:"float-right",children:Object(P.jsx)("a",{href:"/signup",children:"Signup"})},"logout")]})]})})}var E=r(603);r(331);function I(){return Object(P.jsx)("div",{className:"footer-component",children:"\xa9 MERN Blog 2021 by Maryam Aljanabi"})}var C=E.a.Header;E.a.Footer,E.a.Sider,E.a.Content;function L(e){var t=e.children;return Object(P.jsxs)(E.a,{children:[Object(P.jsx)(C,{children:Object(P.jsx)(S,{})}),Object(P.jsxs)("div",{className:"page-container",children:[Object(P.jsx)("div",{className:"page-content",children:t}),Object(P.jsx)("div",{className:"footer",children:Object(P.jsx)(I,{})})]})]})}var z=r(20),T=r.n(z),U=r(39),D=r(17);r(332);function B(e){var t=e.children;return Object(P.jsx)("div",{className:"jumbotron",children:t})}r(333);var A=r(82),F=r(606),R=r(88),_=r(604),M=r(613),Y=r(605),G=r(621),V=r(308),W=r.n(V),q={baseURL:"http://".concat(window.location.hostname,":5000/api")},J=W.a.create(q),H=function(e){return J.post("/auth/login",e)},K=function(e){return J.post("/auth/signup",e)},Q=function(e){return J.get("/users/".concat(e))},X=function(e){return J.put("/users",e)},Z=function(){return J.get("/posts")},$=function(e){return J.get("/posts/user/".concat(e))},ee=function(e){return J.get("/posts/".concat(e))},te=function(e){return J.post("/posts",e)},re=function(e){return J.put("/posts",e)},ne=function(e){return J.delete("/posts/".concat(e))},ce=r.p+"static/media/default-post-image.dd982f18.jpg",ae=r(319),se=r(117),oe=r(66),ie=r(610),le=r(619),je=r(620),ue=(r(351),F.a.Meta);function de(e){var t=e.data,r=e.reloadPosts,c=Object(s.g)(),a=Object(n.useState)(!1),o=Object(D.a)(a,2),i=o[0],l=o[1],j=Object(n.useState)(null),u=Object(D.a)(j,2),d=u[0],b=u[1],h=Object(n.useState)(!1),m=Object(D.a)(h,2),p=m[0],x=m[1],f=Object(O.c)((function(e){return e.user})),v=function(){var e=Object(U.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne(d);case 3:x(!p),r(!p),l(!1),ae.b.success("Post deleted successfully"),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error deleting post...",null!==(t=e.t0.response)&&void 0!==t?t:e.t0),ae.b.error("Error deleting post"),e.t0.response&&e.t0.response.data?ae.b.error(e.t0.response.data):ae.b.error("Error deleting post"),l(!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(P.jsxs)("div",{children:[Object(P.jsx)(se.a,{className:"posts-container",type:"flex",children:t.map((function(e){return Object(P.jsx)(oe.a,{xs:24,sm:12,md:8,lg:8,children:Object(P.jsx)(F.a,{onClick:function(){return c.push("/posts/view",{postID:e._id})},hoverable:!0,cover:Object(P.jsx)("div",{className:"image-container",children:Object(P.jsx)("img",{alt:e.title,src:e.imagePath?e.imagePath:ce,className:"card-image"})}),actions:e.createdBy===f.user.id?[Object(P.jsx)(le.a,{onClick:function(){return c.push("/posts/edit",{postID:e._id})}},"edit"),Object(P.jsx)(je.a,{twoToneColor:"red",onClick:function(){b(e._id),l(!0)}},"delete")]:[],children:Object(P.jsx)(ue,{title:e.title,description:e.content.substring(0,100)+"..."})})},e._id)}))}),Object(P.jsx)(ie.a,{title:"Delete Confirmation",visible:i,onOk:function(){return v()},onCancel:function(){return l(!1)},centered:!0,children:Object(P.jsx)("p",{children:"Are you sure you want to delete post?"})})]})}F.a.Meta;function be(){var e=Object(s.g)(),t=Object(O.c)((function(e){return e.user})),r=Object(n.useState)([]),c=Object(D.a)(r,2),a=c[0],o=c[1],i=Object(n.useState)(window.innerWidth),l=Object(D.a)(i,2),j=l[0],u=l[1],d=Object(n.useState)(null),b=Object(D.a)(d,2),h=b[0],m=b[1],p=Object(n.useState)(!1),x=Object(D.a)(p,2),f=x[0],v=x[1];return Object(n.useEffect)((function(){function e(){u(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[j]),Object(n.useEffect)((function(){Object(U.a)(T.a.mark((function e(){var t,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z();case 3:t=e.sent,r=t.data,o(r),m(null),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),m("Error loading posts data"),console.log("Error retrieving all posts...",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[f]),Object(P.jsxs)("div",{className:"home",children:[t.isLoggedIn?Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(B,{children:Object(P.jsx)("div",{className:"home-jumbotron",children:j<=650?Object(P.jsxs)("div",{className:"centered-section",children:[Object(P.jsx)("h3",{children:"A blogging website for"}),Object(P.jsx)("h2",{children:"EVERYONE"}),Object(P.jsx)(R.a,{type:"primary",shape:"round",icon:Object(P.jsx)(G.a,{}),size:"large",onClick:function(){return e.push("/signin")},children:"Write a post now!"})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{className:"left-section",children:[Object(P.jsx)("h3",{children:"A blogging website for"}),Object(P.jsx)("h2",{children:"EVERYONE"}),Object(P.jsx)(R.a,{type:"primary",shape:"round",icon:Object(P.jsx)(G.a,{}),size:"large",onClick:function(){return e.push("/signin")},children:"Get Started"})]}),Object(P.jsx)("div",{className:"right-section",children:Object(P.jsx)(A.a,{autoplay:!0,loop:!0,src:"https://assets10.lottiefiles.com/packages/lf20_GtqlRg.json"})})]})})})}):Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(B,{children:Object(P.jsx)("div",{className:"home-jumbotron",children:j<=650?Object(P.jsxs)("div",{className:"centered-section",children:[Object(P.jsx)("h3",{children:"A blogging website for"}),Object(P.jsx)("h2",{children:"EVERYONE"}),Object(P.jsx)(R.a,{type:"primary",shape:"round",icon:Object(P.jsx)(G.a,{}),size:"large",onClick:function(){return e.push("/signin")},children:"Get Started"})]}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{className:"left-section",children:[Object(P.jsx)("h3",{children:"A blogging website for"}),Object(P.jsx)("h2",{children:"EVERYONE"}),Object(P.jsx)(R.a,{type:"primary",shape:"round",icon:Object(P.jsx)(G.a,{}),size:"large",onClick:function(){return e.push("/signin")},children:"Get Started"})]}),Object(P.jsx)("div",{className:"right-section",children:Object(P.jsx)(A.a,{autoplay:!0,loop:!0,src:"https://assets10.lottiefiles.com/packages/lf20_GtqlRg.json"})})]})})})}),Object(P.jsx)(_.a,{orientation:"center",children:"Most recent posts"}),h?Object(P.jsx)("div",{className:"loader-container",children:Object(P.jsx)(M.a,{message:h,type:"error"})}):a&&Boolean(a.length)?Object(P.jsx)(de,{data:a,reloadPosts:function(e){return v(e)}}):Object(P.jsx)("div",{className:"loader-container",children:Object(P.jsx)(Y.a,{size:"large"})})]})}r(358);var Oe=r(9),he=r(607),me=r(609),pe=r(614),xe=r(27),fe=r(70),ve=r.n(fe);function ge(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(D.a)(t,2),c=r[0],a=(r[1],Object(n.useState)({})),o=Object(D.a)(a,2),i=o[0],l=o[1],j=Object(O.b)(),u=Object(O.c)((function(e){return e.user})),d=function(){var e=Object(U.a)(T.a.mark((function e(t){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{j(v({user:t}))}catch(n){console.log("Error logging in user...",null!==(r=n.response)&&void 0!==r?r:n),n.response&&n.response.data?l(n.response.data):l({err:"Login error"})}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){u.error&&l([u.error]),u.isLoggedIn&&(ae.b.success("User logged in successfully"),e.push("/"))}),[u]),Object(P.jsx)(xe.b,{initialValues:c,validate:function(e){var t,r,n={};return(null===(t=e.email)||void 0===t?void 0:t.trim())||(n.email="Please enter the email"),(null===(r=e.password)||void 0===r?void 0:r.trim())||(n.password="Please enter the password"),n},onSubmit:d,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(P.jsxs)("form",{className:"form",onSubmit:r,children:[Object(P.jsx)(he.a.Item,{label:"Email",labelCol:{span:24},wrapperCol:{span:24},children:Object(P.jsx)(xe.a,{name:"email",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"email"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Password",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"password",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a.Password,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"password"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),!ve()(i)&&Object(P.jsx)("div",{children:"object"===typeof i?Object.entries(i).map((function(e){var t=Object(D.a)(e,2),r=t[0],n=t[1];return Object(P.jsx)(pe.a,{color:"error",className:"full-width",children:n},r)})):Object(P.jsx)(pe.a,{color:"error",className:"full-width",children:i})}),Object(P.jsxs)("div",{className:"buttons-wrapper-vertical",children:[Object(P.jsx)(R.a,{disabled:n,htmlType:"submit",type:"primary",children:"Login"}),Object(P.jsx)(R.a,{htmlType:"button",type:"link",onClick:function(){return e.push("signup")},children:"Don't have an account? Signup!"})]})]})}})}function we(){var e=Object(n.useState)(window.innerWidth),t=Object(D.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){c(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r]),Object(P.jsx)("div",{className:"login",children:r<=650?Object(P.jsx)("div",{className:"center-panel",children:Object(P.jsx)(ge,{})}):Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("div",{className:"left-panel",children:Object(P.jsx)(ge,{})}),Object(P.jsxs)("div",{className:"right-panel",children:[Object(P.jsx)("h2",{children:"#1 Bloggin website for everyone around the globe. Totally free and easy to use."}),Object(P.jsx)(A.a,{autoplay:!0,loop:!0,src:"https://assets2.lottiefiles.com/packages/lf20_jcikwtux.json"})]})]})})}function ye(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(D.a)(t,2),c=r[0],a=(r[1],Object(n.useState)({})),o=Object(D.a)(a,2),i=o[0],l=o[1],j=function(){var t=Object(U.a)(T.a.mark((function t(r){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,K({user:r});case 3:ae.b.success("User created successfully"),e.push("/login"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error registering a new user...",null!==(n=t.t0.response)&&void 0!==n?n:t.t0),t.t0.response&&t.t0.response.data?l(t.t0.response.data):l({err:"Signup error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsx)(xe.b,{initialValues:c,validate:function(e){var t,r,n,c,a={};return(null===(t=e.userName)||void 0===t?void 0:t.trim())||(a.userName="Please enter the userName"),(null===(r=e.password)||void 0===r?void 0:r.trim())||(a.password="Please enter the password"),(null===(n=e.confirmPassword)||void 0===n?void 0:n.trim())?e.confirmPassword!==e.password&&(a.confirmPassword="Passwords do not match"):a.confirmPassword="Please enter the password confirmation",(null===(c=e.email)||void 0===c?void 0:c.trim())||(a.email="Please enter the email"),a},onSubmit:j,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(P.jsxs)("form",{className:"form",onSubmit:r,children:[Object(P.jsx)(he.a.Item,{label:"UserName",labelCol:{span:24},wrapperCol:{span:24},children:Object(P.jsx)(xe.a,{name:"userName",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"userName"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Password",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"password",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a.Password,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"password"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Confirm Password",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"confirmPassword",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a.Password,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"confirmPassword"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Email",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"email",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"email"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Summary",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"summary",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"summary"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),!ve()(i)&&Object(P.jsx)("div",{children:Object.entries(i).map((function(e){var t=Object(D.a)(e,2),r=t[0],n=t[1];return Object(P.jsx)(pe.a,{color:"error",className:"full-width",children:n},r)}))}),Object(P.jsxs)("div",{className:"buttons-wrapper-vertical",children:[Object(P.jsx)(R.a,{disabled:n,htmlType:"submit",type:"primary",children:"Signup"}),Object(P.jsx)(R.a,{htmlType:"button",type:"link",onClick:function(){return e.push("login")},children:"Already have an account? Login!"})]})]})}})}function Ne(){var e=Object(n.useState)(window.innerWidth),t=Object(D.a)(e,2),r=t[0],c=t[1];return Object(n.useEffect)((function(){function e(){c(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[r]),Object(P.jsx)("div",{className:"signup",children:r<=650?Object(P.jsxs)("div",{className:"center-panel",children:[Object(P.jsx)("h2",{className:"centered-text",children:"Sign up for free"}),Object(P.jsx)(ye,{})]}):Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)("div",{className:"center-panel-small",children:[Object(P.jsx)("h2",{className:"centered-text",children:"Sign up for free"}),Object(P.jsx)(ye,{})]})})})}var Pe=r(166),ke=r.n(Pe);function Se(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(D.a)(t,2),c=r[0],a=(r[1],Object(n.useState)({})),o=Object(D.a)(a,2),i=o[0],l=o[1],j=Object(O.c)((function(e){return e.user})),u=function(){var t=Object(U.a)(T.a.mark((function t(r){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te({post:Object(Oe.a)(Object(Oe.a)({},r),{},{createdBy:j.user.id})});case 3:ae.b.success("Post created successfully"),e.push("/"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error creating a new post...",null!==(n=t.t0.response)&&void 0!==n?n:t.t0),t.t0.response&&t.t0.response.data?l(t.t0.response.data):l({err:"Post error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)("div",{className:"form-container",children:[Object(P.jsx)("h3",{children:"Create a new post"}),Object(P.jsx)(xe.b,{initialValues:c,validate:function(e){var t,r,n={};return(null===(t=e.title)||void 0===t?void 0:t.trim())||(n.title="Please enter the post's title"),(null===(r=e.content)||void 0===r?void 0:r.trim())||(n.content="Please enter the post's content"),n},onSubmit:u,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(P.jsxs)("form",{className:"form",onSubmit:r,children:[Object(P.jsx)(he.a.Item,{label:"Title",labelCol:{span:24},wrapperCol:{span:24},children:Object(P.jsx)(xe.a,{name:"title",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"title"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Content",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"content",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(ke.a,Object(Oe.a)(Object(Oe.a)({rows:4},t),{},{name:"content"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),!ve()(i)&&Object(P.jsx)("div",{children:Object.entries(i).map((function(e){var t=Object(D.a)(e,2),r=t[0],n=t[1];return Object(P.jsx)(pe.a,{color:"error",className:"full-width",children:n},r)}))}),Object(P.jsxs)("div",{className:"buttons-wrapper-horizontal",children:[Object(P.jsx)(R.a,{disabled:n,htmlType:"submit",type:"primary",children:"Create Post"}),Object(P.jsx)(R.a,{htmlType:"button",onClick:function(){return e.goBack()},children:"Back"})]})]})}})]})}function Ee(){var e=Object(O.c)((function(e){return e.user})),t=Object(n.useState)(window.innerWidth),r=Object(D.a)(t,2),c=r[0],a=r[1],o=Object(n.useState)([]),i=Object(D.a)(o,2),l=i[0],j=i[1],u=Object(s.h)(),d=Object(n.useState)(null),b=Object(D.a)(d,2),h=b[0],m=b[1],p=Object(n.useState)(null),x=Object(D.a)(p,2),f=x[0],v=x[1],g=Object(n.useState)(!1),w=Object(D.a)(g,2),y=w[0],N=w[1];Object(n.useEffect)((function(){function e(){a(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[c]);var k=function(){var t=Object(U.a)(T.a.mark((function t(){var r,n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$(null!==f&&void 0!==f?f:e.user.id);case 3:r=t.sent,n=r.data,console.log(n),j(n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Error retrieving all posts...",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u.state&&u.state.hasOwnProperty("userID")&&u.state.hasOwnProperty("userName")&&(m(u.state.userName),v(u.state.userID)),k();case 2:case"end":return e.stop()}}),e)})))()}),[u.state]),Object(n.useEffect)((function(){k()}),[y]),Object(P.jsxs)("div",{className:"posts-div",children:[Object(P.jsx)("h2",{children:h?"Posts of user ".concat(h):"Your posts"}),Boolean(l)&&Boolean(l.length)?Object(P.jsx)(de,{data:l,reloadPosts:function(e){return N(e)}}):Object(P.jsx)("h2",{children:"You have no posts yet"})]})}function Ie(){var e=Object(s.g)(),t=Object(n.useState)({}),r=Object(D.a)(t,2),c=r[0],a=r[1],o=Object(n.useState)({}),i=Object(D.a)(o,2),l=i[0],j=i[1],u=(Object(O.c)((function(e){return e.user})),Object(s.h)()),d=Object(n.useState)(null),b=Object(D.a)(d,2),h=(b[0],b[1]);Object(n.useEffect)((function(){var t=null;Object(U.a)(T.a.mark((function r(){var n,c;return T.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!u.state||!u.state.hasOwnProperty("postID")){r.next=17;break}return t=u.state.postID,h(t),r.prev=3,r.next=6,ee(t);case 6:n=r.sent,c=n.data,console.log(c),a(c),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(3),console.log("Error retrieving one post...",r.t0);case 15:r.next=19;break;case 17:ae.b.error("Post ID was not provided"),e.goBack();case 19:case"end":return r.stop()}}),r,null,[[3,12]])})))()}),[u.state]);var m=function(){var t=Object(U.a)(T.a.mark((function t(r){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,re({post:r});case 3:ae.b.success("Post updated successfully"),e.goBack(),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error updating post...",null!==(n=t.t0.response)&&void 0!==n?n:t.t0),t.t0.response&&t.t0.response.data?j(t.t0.response.data):j({err:"Update error"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(P.jsxs)("div",{className:"form-container",children:[Object(P.jsx)("h3",{children:"Edit post"}),Object(P.jsx)(xe.b,{initialValues:c,validate:function(e){var t,r,n={};return(null===(t=e.title)||void 0===t?void 0:t.trim())||(n.title="Please enter the post's title"),(null===(r=e.content)||void 0===r?void 0:r.trim())||(n.content="Please enter the post's content"),n},onSubmit:m,render:function(t){var r=t.handleSubmit,n=t.submitting;return Object(P.jsxs)("form",{className:"form",onSubmit:r,children:[Object(P.jsx)(he.a.Item,{label:"Title",labelCol:{span:24},wrapperCol:{span:24},children:Object(P.jsx)(xe.a,{name:"title",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"title"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Content",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"content",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(ke.a,Object(Oe.a)(Object(Oe.a)({rows:4},t),{},{name:"content"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),!ve()(l)&&Object(P.jsx)("div",{children:Object.entries(l).map((function(e){var t=Object(D.a)(e,2),r=t[0],n=t[1];return Object(P.jsx)(pe.a,{color:"error",className:"full-width",children:n},r)}))}),Object(P.jsxs)("div",{className:"buttons-wrapper-horizontal",children:[Object(P.jsx)(R.a,{disabled:n,htmlType:"submit",type:"primary",children:"Update Post"}),Object(P.jsx)(R.a,{htmlType:"button",onClick:function(){return e.goBack()},children:"Back"})]})]})}})]})}var Ce=r(608),Le=r(622),ze=r(623),Te=r(624),Ue=r(625),De=r.p+"static/media/default-user.c3f94521.png";r(485);function Be(){var e,t=Object(s.g)(),r=Object(n.useState)({}),c=Object(D.a)(r,2),a=c[0],o=c[1],i=Object(n.useState)({}),l=Object(D.a)(i,2),j=l[0],u=l[1],d=Object(O.c)((function(e){return e.user})),b=Object(n.useState)(!1),h=Object(D.a)(b,2),m=h[0],p=h[1],x=Object(n.useState)(!1),f=Object(D.a)(x,2),v=f[0],g=f[1],y=Object(O.b)();Object(n.useEffect)((function(){Object(U.a)(T.a.mark((function e(){var r,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&d.user&&d.user.id)){e.next=14;break}return e.prev=1,e.next=4,Q(d.user.id);case 4:r=e.sent,n=r.data,o(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log("Error retrieving user data...",e.t0);case 12:e.next=16;break;case 14:ae.b.error("An error occured while retrieving user ID"),t.push("/");case 16:case"end":return e.stop()}}),e,null,[[1,9]])})))()}),[]);var N=function(){var e=Object(U.a)(T.a.mark((function e(t){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u([]),e.prev=1,e.next=4,X({user:t});case 4:y(w(t)),ae.b.success("User profile updated successfully"),p(!1),g(!1),o(t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("Error updating user profile..",null!==(r=e.t0.response)&&void 0!==r?r:e.t0),e.t0.response&&e.t0.response.data?u(e.t0.response.data):u({err:"Profile update error"});case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)("div",{children:Object(P.jsxs)("div",{className:"user-profile",children:[Object(P.jsxs)("h2",{className:"centered-text ",children:[a.userName,"'s Profile"]}),Object(P.jsx)("div",{className:"user-image centered-text ",children:Object(P.jsx)(Ce.a,{className:"image",src:null!==(e=a.imagePath)&&void 0!==e?e:De})}),Object(P.jsx)("div",{className:"user-info",children:Object(P.jsx)(xe.b,{initialValues:a,validate:function(e){var t,r,n,c,a,s={};return m&&!(null===(t=e.userName)||void 0===t?void 0:t.trim())&&(s.userName="Please enter the userName"),v&&!(null===(r=e.oldPassword)||void 0===r?void 0:r.trim())&&(s.password="Please enter the old password"),v&&!(null===(n=e.password)||void 0===n?void 0:n.trim())&&(s.password="Please enter the password"),v&&!(null===(c=e.confirmPassword)||void 0===c?void 0:c.trim())?s.confirmPassword="Please enter the password confirmation":v&&e.confirmPassword!==e.password&&(s.confirmPassword="Passwords do not match"),m&&!(null===(a=e.email)||void 0===a?void 0:a.trim())&&(s.email="Please enter the email"),s},onSubmit:N,render:function(e){var t=e.handleSubmit,r=e.submitting,n=e.form;return Object(P.jsxs)("form",{className:"form",onSubmit:t,children:[Object(P.jsx)(he.a.Item,{label:"UserName",labelCol:{span:24},wrapperCol:{span:24},children:Object(P.jsx)(xe.a,{name:"userName",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"userName",readOnly:!m,className:!m&&"disabled"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Email",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"email",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"email",readOnly:!m,className:!m&&"disabled"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Summary",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"summary",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{value:a.summary||m?a.summary:"No content",name:"summary",readOnly:!m,className:!m&&"disabled"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),m&&Object(P.jsx)(he.a.Item,{label:"Image URL",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"imagePath",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"imagePath"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),v&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(he.a.Item,{label:"Old Password",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"oldPassword",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a.Password,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"oldPassword",className:"no-radius"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Password",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"password",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a.Password,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"password"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})}),Object(P.jsx)(he.a.Item,{label:"Confirm Password",labelCol:{span:24},children:Object(P.jsx)(xe.a,{name:"confirmPassword",children:function(e){var t=e.input,r=e.meta;return Object(P.jsxs)("div",{children:[Object(P.jsx)(me.a.Password,Object(Oe.a)(Object(Oe.a)({},t),{},{name:"confirmPassword"})),r.touched&&r.error&&Object(P.jsx)(pe.a,{color:"error",children:r.error})]})}})})]}),!ve()(j)&&Object(P.jsx)("div",{children:Object.entries(j).map((function(e){var t=Object(D.a)(e,2),r=t[0],n=t[1];return Object(P.jsx)(pe.a,{color:"error",className:"full-width",children:n},r)}))}),Object(P.jsxs)("div",{className:"buttons-wrapper-horizontal m-auto",children:[!(m||v)&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(R.a,{htmlType:"button",type:"primary",icon:Object(P.jsx)(Le.a,{}),onClick:function(){p(!0),g(!1)},children:"Edit Profile"}),Object(P.jsx)(R.a,{htmlType:"button",type:"primary",icon:Object(P.jsx)(ze.a,{}),onClick:function(){p(!1),g(!0)},children:"Edit Password"})]}),(m||v)&&Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(R.a,{disabled:r,htmlType:"submit",type:"primary",icon:Object(P.jsx)(Te.a,{}),children:"Submit"}),Object(P.jsx)(R.a,{htmlType:"button",type:"primary",icon:Object(P.jsx)(Ue.a,{}),onClick:function(){p(!1),g(!1),n.reset()},children:"Cancel"})]})]})]})}})})]})})}var Ae=r(626),Fe=(r(486),r(313)),Re=r.n(Fe),_e=r(314),Me=r.n(_e);function Ye(){var e,t=Object(n.useState)({}),r=Object(D.a)(t,2),c=r[0],a=r[1],o=Object(s.g)(),i=Object(O.c)((function(e){return e.user})),l=Object(s.h)(),j=Object(n.useState)(!1),u=Object(D.a)(j,2),d=(u[0],u[1]),b=Object(n.useState)(null),h=Object(D.a)(b,2),m=(h[0],h[1]);return Object(n.useEffect)((function(){var e=null;Object(U.a)(T.a.mark((function t(){var r,n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.state||!l.state.hasOwnProperty("postID")){t.next=15;break}return e=l.state.postID,t.prev=2,t.next=5,ee(e);case 5:r=t.sent,n=r.data,a(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log("Error retrieving one post...",t.t0);case 13:t.next=17;break;case 15:ae.b.error("An error occured while retrieving post ID"),o.push("/");case 17:case"end":return t.stop()}}),t,null,[[2,10]])})))()}),[l.state]),Object(P.jsxs)("div",{className:"view-post",children:[Object(P.jsxs)("div",{className:"post-header",children:[Object(P.jsx)("h1",{children:c.title}),Object(P.jsxs)("div",{className:"two-cols",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)(Me.a,{size:"large",src:null!==(e=c.userImageUrl)&&void 0!==e?e:De}),"\xa0",c.createdByName]}),Object(P.jsx)("p",{children:Re()(c.createdAt).format("DD MMMM YYYY")})]})]}),Object(P.jsx)("div",{className:"centered-text",children:Object(P.jsx)(Ce.a,{src:c.imagePath?c.imagePath:ce})}),Object(P.jsx)("div",{className:"post-content",children:c.content}),c.createdBy===i.user.id&&Object(P.jsxs)("div",{className:"buttons-wrapper-horizontal",children:[Object(P.jsx)(R.a,{htmlType:"button",type:"primary",icon:Object(P.jsx)(Le.a,{}),onClick:function(){return o.push("/posts/edit",{postID:c._id})},children:"Edit Profile"}),Object(P.jsx)(R.a,{htmlType:"button",type:"primary",icon:Object(P.jsx)(Ae.a,{}),danger:!0,onClick:function(){m(c._id),d(!0)},children:"Edit Profile"})]})]})}var Ge=r(169),Ve=function(e){var t=e.component,r=Object(Ge.a)(e,["component"]),n=Object(O.c)((function(e){return e.user}));return Object(P.jsx)(s.b,Object(Oe.a)(Object(Oe.a)({},r),{},{render:function(e){return n.isLoggedIn?Object(P.jsx)(t,Object(Oe.a)({},e)):Object(P.jsx)(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},We=function(e){var t=e.component,r=Object(Ge.a)(e,["component"]),n=Object(O.c)((function(e){return e.user}));return Object(P.jsx)(s.b,Object(Oe.a)(Object(Oe.a)({},r),{},{render:function(e){return n.isLoggedIn?Object(P.jsx)(s.a,{to:{pathname:"/",state:{from:e.location}}}):Object(P.jsx)(t,Object(Oe.a)({},e))}}))};function qe(){return Object(P.jsxs)("div",{className:"my-2-auto",children:[Object(P.jsx)("h1",{className:"centered-text",children:"Page not found"}),Object(P.jsx)(A.a,{autoplay:!0,loop:!0,style:{height:"500px"},src:"https://assets1.lottiefiles.com/packages/lf20_zxliqmhr.json"})]})}var Je,He=function(){return Object(P.jsx)(L,{children:Object(P.jsxs)(s.d,{children:[Object(P.jsx)(s.b,{exact:!0,path:["/","/home"],component:be}),Object(P.jsx)(We,{exact:!0,path:"/login",component:we}),Object(P.jsx)(We,{exact:!0,path:"/signup",component:Ne}),Object(P.jsx)(s.b,{exact:!0,path:"/user/posts",component:Ee}),Object(P.jsx)(s.b,{exact:!0,path:"/user/profile",component:Be}),Object(P.jsx)(s.b,{exact:!0,path:"/posts/view",component:Ye}),Object(P.jsx)(Ve,{exact:!0,path:"/posts/new",component:Se}),Object(P.jsx)(Ve,{exact:!0,path:"/posts/edit",component:Ie}),Object(P.jsx)(s.b,{component:qe})]})})},Ke=(r(490),r(51)),Qe=r(78),Xe=r(315),Ze=r(317),$e=r(210),et=r.n($e),tt=function(){try{var e=sessionStorage.getItem("user");return null===e?{isLoggedIn:!1,errors:"",token:null}:JSON.parse(e)}catch(r){var t;return void console.log("Load state error...",null!==(t=r.response)&&void 0!==t?t:r)}},rt=function(e){try{sessionStorage.clear();var t=JSON.stringify(e);sessionStorage.setItem("user",t)}catch(n){var r;console.log("Save state error...",null!==(r=n.response)&&void 0!==r?r:n)}},nt={isLoggedIn:!1,error:"",token:null,user:{id:"",userName:"",imagePath:""}};if(tt()&&tt().token){var ct=et.a.decode(tt().token);Je=Object(Oe.a)(Object(Oe.a)({},tt()),{},{user:{id:ct.id,userName:ct.userName,imagePath:ct.imagePath}})}else Je=Object(Oe.a)({},nt);var at=Object(Qe.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var r;if(tt()&&tt().token){var n=et.a.decode(tt().token);r=Object(Oe.a)(Object(Oe.a)({},tt()),{},{user:{id:n.id,userName:n.userName,imagePath:n.imagePath}})}return r;case m:var c=Object(Oe.a)(Object(Oe.a)({},e),{},{user:Object(Oe.a)(Object(Oe.a)({},e.user),{},{imagePath:t.payload.imagePath,userName:t.payload.userName})});return rt(c),c;case f:return rt(nt),nt;case x:if(t.payload){var a={token:null,isLoggedIn:!1,error:t.payload};return rt(a),a}default:return e}}}),st=r(93),ot=T.a.mark(lt),it=T.a.mark(jt);function lt(e){var t,r;return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,H(e.payload);case 3:if(!(t=n.sent).data.token){n.next=9;break}return r=t.data.token,rt({isLoggedIn:!0,error:"",token:r}),n.next=9,Object(st.c)(g({token:r}));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(st.c)(y("Login data is incorrect"));case 15:case"end":return n.stop()}}),ot,null,[[0,11]])}function jt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(st.d)(h,lt);case 2:case"end":return e.stop()}}),it)}var ut=T.a.mark(dt);function dt(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(st.a)([Object(st.b)(jt)]);case 2:case"end":return e.stop()}}),ut)}var bt=Object(Ze.a)({onError:function(e,t){console.log({onSagaError:"saga error",err:e,errInfo:t})}}),Ot=[Object(Xe.createLogger)(),bt],ht=function(){var e=Object(Qe.e)(at,Qe.a.apply(void 0,Ot));return bt.run(dt),e,e}();a.a.render(Object(P.jsx)(O.a,{store:ht,children:Object(P.jsx)(Ke.a,{children:Object(P.jsx)(He,{})})}),document.getElementById("root"))}},[[601,1,2]]]);
//# sourceMappingURL=main.ba14192e.chunk.js.map